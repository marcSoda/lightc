Program     ::= StmtList ;
StmtList    ::= ( Stmt ';' )+ ;
Stmt        ::= LetStmt
              | ForStmt
              | FnDecl
              | ExternDecl
              | Expr ;
Block       ::= '{' StmtList? '}' ;
FnDecl      ::= Prototype Block ;
ExternDecl  ::= 'extern' Prototype ;
Prototype   ::= 'fn' ident '(' ( TypedDecl ( ',' TypedDecl )* )* ')' ( '->' TypeAntn )? ;
ForStmt     ::= 'for' TypedDecl '=' Expr ';' Expr ';' number? Block ;
LetStmt     ::= 'let' TypedDecl ( '=' Expr  )? ;
TypedDecl   ::= ident ':' TypeAntn ;
TypeAntn    ::= type | '[' type ']' ;
Expr        ::= PrimaryExpr
              | Expr mul_op Expr
              | Expr add_op Expr
              | Expr rel_op Expr
              | Expr '&&' Expr
              | Expr '||' Expr
              | IdentExpr '=' Expr ;
PrimaryExpr ::= CondExpr
              | LitExpr
              | IdentExpr
              | CallExpr
              | Block
              | ParenExpr
              | UnopExpr
              | PrimaryExpr Index ;
UnopExpr    ::= ( '-' | '!' ) Expr ;
LitExpr     ::= number | bool | CharLit | ArrayLit ;
CallExpr    ::= ident '(' ExprList? ')' ;
ParenExpr   ::= '(' Expr ')' ;
CondExpr    ::= 'if' Expr Block ( 'else' (CondExpr | Block ) )? ;
IdentExpr   ::= ident ;
Index       ::= '[' Expr ']' ;
ArrayLit    ::= '[' ExprList? ']' ;
CharLit     ::= char ;
ExprList    ::= Expr ','? | Expr ( ',' Expr )* ;

type        ::= 'int' | 'int8' | 'int16' | 'int32' | 'int64'
              | 'uint' | 'uint8' | 'uint16' | 'uint32' | 'uint64'
              | 'float' | 'double' | 'bool' | 'char' ;
bool        ::= 'true' | 'false' ;
ident       ::= letter ( letter | digit | '_' )* ;
rel_op      ::= '>' | '<' | '==' ;
add_op      ::= '+' | '-' ;
mul_op      ::= '*' | '/' ;
number      ::= integer | float ;
integer     ::= digit+ ;
float       ::= digit '.' digit ;
digit       ::= [0-9] ;
char        ::= "'" ( [^'\\r\n\t] | '\' [rnt0] ) "'" ;
letter      ::= [a-zA-Z] ;
whitespace  ::= [ \t\r\n] ;
comment     ::= '//' [^\r\n]* [\r\n] ;
